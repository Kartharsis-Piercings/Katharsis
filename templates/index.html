{% extends 'base.html' %}

{% block content %}
    <section class="hero">
        <div class="hero-content">
            <h1>Bienvenidos a Katharsis</h1>
            <p class="sub-hero">En Katharsis, creemos que el body piercing debe ser seguro. Por eso todas nuestras joyas son de Titanio grado Implante hipoalergénico. ¡Porque tu estilo no debe comprometer tu salud!</p>
            <div class="cta-buttons">
                <a href="{{ url_for('joyas') }}" class="btn btn-primary">Ver Catálogo</a>
                <a href="{{ url_for('contacto') }}" class="btn btn-secondary">¿Necesitas ayuda? Contactanos</a>
            </div>
        </div>
    </section>

    <section class="guide-cards-section">
        <div class="guide-cards-container">
            <div class="guide-cards-track">
                
                {% for card in guide_cards %}
                <div class="guide-card-wrapper">
                    <a href="{{ card.link_url }}" class="guide-card" style="background-image: url('{{ card.image_url }}');">
                        <div class="card-content">
                            <h3>{{ card.title }}</h3>
                            <p>{{ card.description }}</p>
                            <span class="btn-card">Descubrir Más</span>
                        </div>
                    </a>
                </div>
                {% endfor %}

            </div>
            <button class="carousel-btn prev-btn-guide">&#10094;</button>
            <button class="carousel-btn next-btn-guide">&#10095;</button>
        </div>
    </section>

    <section class="carousel-section">
        <div class="carousel-wrapper">
            <div class="carousel-text">
                <h2>Resultados que Enamoran</h2>
                <p>Calidad y precisión en cada piercing. Explora algunos de nuestros trabajos y visualiza tu próximo estilo.</p>
                <a href="https://www.instagram.com/tu-usuario/" class="btn-instagram" target="_blank"><i class="fab fa-instagram"></i> Ver más en Instagram</a>
            </div>
            <div class="gallery-carousel-container">
                <div class="gallery-track">
                    {% for item in gallery_items %}
                    <div class="gallery-slide">
                        {% if item.type == 'video' %}
                            <video src="{{ url_for('static', filename=item.url.replace('../static/', '')) }}" autoplay muted loop playsinline></video>
                        {% else %}
                            <img src="{{ url_for('static', filename=item.url.replace('../static/', '')) }}" alt="{{ item.caption }}" style="object-position: {{ item.position | default('50% 50%') }};">
                        {% endif %}
                        <div class="slide-caption">{{ item.caption }}</div>
                    </div>
                    {% endfor %}
                </div>
                <button class="carousel-btn prev-btn-gallery">&#10094;</button>
                <button class="carousel-btn next-btn-gallery">&#10095;</button>
            </div>
        </div>
    </section>
    
    <section class="features-section">
        <div class="container">
            <h2 class="section-title">Tu Seguridad, Nuestra Prioridad</h2>
            <div class="features-grid">
                {% for feature in features %}
                <article class="feature-card">
                    <i class="{{ feature.icon }}"></i>
                    <h3>{{ feature.title }}</h3>
                    <p>{{ feature.short_description }}</p>
                    <button class="btn-link read-more-feature" data-title="{{ feature.title }}" data-content="{{ feature.full_description }}">Leer más</button>
                </article>
                {% endfor %}
            </div>
        </div>
    </section>

    <section class="product-categories">
        <div class="container">
            <h2 class="section-title">Encuentra tu Próxima Joya Favorita</h2>
            <div class="category-carousel-container">
                <div class="category-track">
                    {% for category in featured_categories %}
                    <div class="category-card-wrapper">
                        <a href="{{ url_for('joyas', category=category.name) }}" class="category-card"
                           style="background-image: url('{{ url_for('static', filename=category.image.replace('../static/', '')) }}');"
                           data-hover-image="{{ url_for('static', filename=category.most_popular_product_image.replace('../static/', '')) }}">
                            <div class="category-info">
                                <div class="category-text">
                                    <h3>{{ category.name }}</h3>
                                    <span class="price-range">{{ category.price_string }}</span>
                                </div>
                                <span class="btn-category">Explorar Diseños</span>
                            </div>
                        </a>
                    </div>
                    {% endfor %}
                </div>
                <button class="carousel-btn prev-btn-category">&#10094;</button>
                <button class="carousel-btn next-btn-category">&#10095;</button>
            </div>
        </div>
    </section>

    <div id="feature-modal" class="modal-overlay">
        <div class="modal-content">
            <button id="close-feature-modal" class="close-modal-btn">&times;</button>
            <h3 id="modal-title"></h3>
            <p id="modal-content"></p>
        </div>
    </div>    
{% endblock %}